"use strict";(self.webpackChunkphysical_ai_robotics_textbook=self.webpackChunkphysical_ai_robotics_textbook||[]).push([[390],{4498:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"chapter-1-ros2-fundamentals/debugging-ros2","title":"Debugging ROS 2 Systems","description":"Introduction","source":"@site/docs/chapter-1-ros2-fundamentals/04-debugging-ros2.md","sourceDirName":"chapter-1-ros2-fundamentals","slug":"/chapter-1-ros2-fundamentals/debugging-ros2","permalink":"/physical-ai-robotics-textbook/docs/chapter-1-ros2-fundamentals/debugging-ros2","draft":false,"unlisted":false,"editUrl":"https://github.com/devhammad0/physical-ai-robotics-textbook/tree/main/docs/chapter-1-ros2-fundamentals/04-debugging-ros2.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"title":"Debugging ROS 2 Systems","sidebar_position":4,"sidebar_label":"4. Debugging ROS 2","chapter":1,"lesson":4,"lesson_slug":"debugging-ros2","duration_minutes":60,"estimated_difficulty":"beginner","simulation_required":["turtlesim"],"safety_level":"simulation_only","cefr_level":"A2","hardware_prerequisites":[],"concepts":["Diagnostic tools","ros2 node list/info","ros2 topic list/info/echo","Logging and debugging","Systematic troubleshooting","Error diagnosis","Message verification"],"primary_layer":"Layer 2","learning_objectives":["Use ros2 command-line tools to diagnose issues","Understand logging and how to read log output","Systematically troubleshoot publisher/subscriber problems","Collaborate with AI to debug broken code","Build a mental model of the system for diagnosis"],"assessment_type":"practical_exercise","keywords":["debugging","ros2 tools","diagnostics","troubleshooting","logging","error handling","ROS 2"]},"sidebar":"tutorialSidebar","previous":{"title":"3. First Publisher","permalink":"/physical-ai-robotics-textbook/docs/chapter-1-ros2-fundamentals/first-publisher"},"next":{"title":"5. First Subscriber","permalink":"/physical-ai-robotics-textbook/docs/chapter-1-ros2-fundamentals/first-subscriber"}}');var r=n(6070),o=n(8439);const t={title:"Debugging ROS 2 Systems",sidebar_position:4,sidebar_label:"4. Debugging ROS 2",chapter:1,lesson:4,lesson_slug:"debugging-ros2",duration_minutes:60,estimated_difficulty:"beginner",simulation_required:["turtlesim"],safety_level:"simulation_only",cefr_level:"A2",hardware_prerequisites:[],concepts:["Diagnostic tools","ros2 node list/info","ros2 topic list/info/echo","Logging and debugging","Systematic troubleshooting","Error diagnosis","Message verification"],primary_layer:"Layer 2",learning_objectives:["Use ros2 command-line tools to diagnose issues","Understand logging and how to read log output","Systematically troubleshoot publisher/subscriber problems","Collaborate with AI to debug broken code","Build a mental model of the system for diagnosis"],assessment_type:"practical_exercise",keywords:["debugging","ros2 tools","diagnostics","troubleshooting","logging","error handling","ROS 2"]},l="Debugging ROS 2 Systems",c={},d=[{value:"Introduction",id:"introduction",level:2},{value:"The Diagnostic Toolkit",id:"the-diagnostic-toolkit",level:2},{value:"Command 1: ros2 node list",id:"command-1-ros2-node-list",level:2},{value:"Command 2: ros2 node info",id:"command-2-ros2-node-info",level:2},{value:"Command 3: ros2 topic list",id:"command-3-ros2-topic-list",level:2},{value:"Command 4: ros2 topic info",id:"command-4-ros2-topic-info",level:2},{value:"Command 5: ros2 topic echo",id:"command-5-ros2-topic-echo",level:2},{value:"Logging: What the Node Is Doing",id:"logging-what-the-node-is-doing",level:2},{value:"Systematic Debugging: The 5-Question Method",id:"systematic-debugging-the-5-question-method",level:2},{value:"Question 1: Is the Node Running?",id:"question-1-is-the-node-running",level:3},{value:"Question 2: Is the Topic Created?",id:"question-2-is-the-topic-created",level:3},{value:"Question 3: Is the Topic Receiving Messages?",id:"question-3-is-the-topic-receiving-messages",level:3},{value:"Question 4: Are Messages Correct?",id:"question-4-are-messages-correct",level:3},{value:"Question 5: Is the Subscriber Responding?",id:"question-5-is-the-subscriber-responding",level:3},{value:"Common Errors &amp; Diagnosis",id:"common-errors--diagnosis",level:2},{value:"Error: &quot;ros2: command not found&quot;",id:"error-ros2-command-not-found",level:3},{value:"Error: &quot;Node &#39;/my_node&#39; not found&quot;",id:"error-node-my_node-not-found",level:3},{value:"Error: Topic doesn&#39;t appear in <code>ros2 topic list</code>",id:"error-topic-doesnt-appear-in-ros2-topic-list",level:3},{value:"Error: Messages don&#39;t appear in <code>ros2 topic echo</code>",id:"error-messages-dont-appear-in-ros2-topic-echo",level:3},{value:"Error: Messages appear but are all zeros",id:"error-messages-appear-but-are-all-zeros",level:3},{value:"Error: Subscriber isn&#39;t responding (topic shows messages, but nothing happens)",id:"error-subscriber-isnt-responding-topic-shows-messages-but-nothing-happens",level:3},{value:"\ud83e\udd1d Collaboration Exercise: Debug This System",id:"-collaboration-exercise-debug-this-system",level:2},{value:"Setup",id:"setup",level:3},{value:"Your Diagnosis Task",id:"your-diagnosis-task",level:3},{value:"Work With AI to Fix It",id:"work-with-ai-to-fix-it",level:3},{value:"Fix the Code",id:"fix-the-code",level:3},{value:"Self-Assessment",id:"self-assessment",level:2},{value:"What&#39;s Next?",id:"whats-next",level:2},{value:"Additional Resources",id:"additional-resources",level:2}];function a(e){const s={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"debugging-ros-2-systems",children:"Debugging ROS 2 Systems"})}),"\n",(0,r.jsx)(s.h2,{id:"introduction",children:"Introduction"}),"\n",(0,r.jsxs)(s.p,{children:["Your code breaks. That's not failure\u2014that's learning. In this lesson, you'll learn ",(0,r.jsx)(s.strong,{children:"how to fix it"}),"."]}),"\n",(0,r.jsx)(s.p,{children:"We'll start with the diagnostic toolkit\u2014command-line tools that let you see inside a running ROS 2 system. Then, you'll debug broken code while collaborating with AI."}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Time estimate"}),": 60 minutes"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"the-diagnostic-toolkit",children:"The Diagnostic Toolkit"}),"\n",(0,r.jsxs)(s.p,{children:["When something doesn't work, you ask: ",(0,r.jsx)(s.strong,{children:'"What\'s running, and what data is flowing?"'})]}),"\n",(0,r.jsx)(s.p,{children:"The answer comes from four commands:"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"ros2 node list"})," \u2014 What nodes exist?"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"ros2 node info"})," \u2014 What does a node publish/subscribe?"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"ros2 topic list"})," \u2014 What topics are active?"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"ros2 topic echo"})," \u2014 What data is flowing through a topic?"]}),"\n",(0,r.jsx)(s.li,{children:"Logging \u2014 What is each node doing?"}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"command-1-ros2-node-list",children:"Command 1: ros2 node list"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"What it does"}),": Shows all running nodes"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ros2 node list\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Example output"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"/turtle_command_publisher\n/turtlesim\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"What it tells you"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Your publisher node is running \u2705"}),"\n",(0,r.jsx)(s.li,{children:"Turtlesim is running \u2705"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"What it doesn't tell you"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"If nodes are working correctly (just that they exist)"}),"\n",(0,r.jsx)(s.li,{children:"If they're communicating"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Use case"}),': "Is my node actually running?"']}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"command-2-ros2-node-info",children:"Command 2: ros2 node info"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"What it does"}),": Shows what a node publishes and subscribes to"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ros2 node info /turtle_command_publisher\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Example output"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"Node /turtle_command_publisher\n  Publishers:\n    /turtle1/cmd_vel: geometry_msgs/msg/Twist\n  Subscribers:\n    (none)\n  Service Servers:\n    (none)\n  Service Clients:\n    (none)\n  Action Servers:\n    (none)\n  Action Clients:\n    (none)\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"What it tells you"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Your publisher publishes to ",(0,r.jsx)(s.code,{children:"/turtle1/cmd_vel"})," \u2705"]}),"\n",(0,r.jsxs)(s.li,{children:["It sends ",(0,r.jsx)(s.code,{children:"Twist"})," messages \u2705"]}),"\n",(0,r.jsx)(s.li,{children:"It doesn't subscribe to anything (correct for a publisher)"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Use case"}),': "What is my node actually connected to?"']}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"command-3-ros2-topic-list",children:"Command 3: ros2 topic list"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"What it does"}),": Shows all active topics"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ros2 topic list\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Example output"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"/turtle1/cmd_vel\n/turtle1/color_sensor\n/turtle1/pose\n/turtlesim/describe_parameters\n...\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"What it tells you"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Topics that exist in the system"}),"\n",(0,r.jsxs)(s.li,{children:["If your topic (",(0,r.jsx)(s.code,{children:"/turtle1/cmd_vel"}),") is being created"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Use case"}),': "Does the topic exist? Is it spelled correctly?"']}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"command-4-ros2-topic-info",children:"Command 4: ros2 topic info"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"What it does"}),": Shows details about a topic"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ros2 topic info /turtle1/cmd_vel\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Example output"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"Type: geometry_msgs/msg/Twist\nPublisher count: 1\nSubscriber count: 1\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"What it tells you"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Type"}),": The message type (Twist) is correct"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Publisher count"}),": 1 node is publishing (your publisher)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Subscriber count"}),": 1 node is subscribing (Turtlesim)"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"What it should be"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Exactly 1 publisher (your node)"}),"\n",(0,r.jsx)(s.li,{children:"At least 1 subscriber (Turtlesim)"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Use case"}),': "Are the right nodes connected to this topic?"']}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"command-5-ros2-topic-echo",children:"Command 5: ros2 topic echo"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"What it does"}),": Shows actual messages flowing through a topic in real-time"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ros2 topic echo /turtle1/cmd_vel\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Example output"})," (continuous):"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"linear:\n  x: 1.0\n  y: 0.0\n  z: 0.0\nangular:\n  x: 0.0\n  y: 0.0\n  z: 0.0\n---\nlinear:\n  x: 1.0\n  y: 0.0\n  z: 0.0\nangular:\n  x: 0.0\n  y: 0.0\n  z: 0.0\n---\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"What it tells you"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Messages ARE being published \u2705"}),"\n",(0,r.jsxs)(s.li,{children:["The values are correct (",(0,r.jsx)(s.code,{children:"linear.x = 1.0"}),") \u2705"]}),"\n",(0,r.jsx)(s.li,{children:"Updates happen every 0.5 seconds (matching your timer) \u2705"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"What it doesn't tell you"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"If the subscriber is actually processing the messages (you need to watch the Turtlesim window for that)"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Use case"}),': "Are messages actually flowing? Are they the right values?"']}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"logging-what-the-node-is-doing",children:"Logging: What the Node Is Doing"}),"\n",(0,r.jsx)(s.p,{children:"Your code includes logging statements:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"self.get_logger().info(f'Publishing: linear.x={msg.linear.x}')\n"})}),"\n",(0,r.jsx)(s.p,{children:"When you run the node, you see:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"[INFO] [turtle_command_publisher]: Publishing: linear.x=1.0\n[INFO] [turtle_command_publisher]: Publishing: linear.x=1.0\n"})}),"\n",(0,r.jsx)(s.p,{children:"This tells you:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"The code reached this line \u2705"}),"\n",(0,r.jsx)(s.li,{children:"The value is correct \u2705"}),"\n",(0,r.jsx)(s.li,{children:"The timing is right (5 messages in ~2.5 seconds) \u2705"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Add logging to debug"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"def timer_callback(self):\n    self.get_logger().info(f'Timer fired! Counter={self.counter}')  # Add this\n\n    msg = Twist()\n    msg.linear.x = 1.0\n\n    self.get_logger().info(f'About to publish: {msg}')  # Add this\n    self.publisher_.publish(msg)\n    self.get_logger().info('Published successfully')    # Add this\n\n    self.counter += 1\n"})}),"\n",(0,r.jsx)(s.p,{children:"Now when you run the node, you see exactly what's happening step-by-step."}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"systematic-debugging-the-5-question-method",children:"Systematic Debugging: The 5-Question Method"}),"\n",(0,r.jsxs)(s.p,{children:["When something doesn't work, ask these questions ",(0,r.jsx)(s.strong,{children:"in order"}),":"]}),"\n",(0,r.jsx)(s.h3,{id:"question-1-is-the-node-running",children:"Question 1: Is the Node Running?"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ros2 node list | grep your_node_name\n"})}),"\n",(0,r.jsx)(s.p,{children:"If you see your node, \u2705 it's running.\nIf not, the node crashed or didn't start."}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Next step"}),": Check terminal output for error messages."]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"question-2-is-the-topic-created",children:"Question 2: Is the Topic Created?"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ros2 topic list | grep /your/topic\n"})}),"\n",(0,r.jsxs)(s.p,{children:["If you see the topic, \u2705 the node created it.\nIf not, the ",(0,r.jsx)(s.code,{children:"create_publisher()"})," failed (check import statement)."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Next step"}),": Check for Python syntax errors."]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"question-3-is-the-topic-receiving-messages",children:"Question 3: Is the Topic Receiving Messages?"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ros2 topic echo /your/topic\n"})}),"\n",(0,r.jsx)(s.p,{children:"If you see messages appearing, \u2705 the publisher is working.\nIf nothing appears, the callback is never called (check timer)."}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Next step"}),": Check timer creation and callback naming."]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"question-4-are-messages-correct",children:"Question 4: Are Messages Correct?"}),"\n",(0,r.jsxs)(s.p,{children:["Look at the output from ",(0,r.jsx)(s.code,{children:"ros2 topic echo"}),". Are the values what you expect?"]}),"\n",(0,r.jsxs)(s.p,{children:["If values are correct, \u2705 your message creation is right.\nIf values are wrong, check ",(0,r.jsx)(s.code,{children:"msg.field = value"})," assignments."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Next step"}),": Verify message field names and types."]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"question-5-is-the-subscriber-responding",children:"Question 5: Is the Subscriber Responding?"}),"\n",(0,r.jsx)(s.p,{children:"Look at the Turtlesim window (or other subscriber behavior)."}),"\n",(0,r.jsx)(s.p,{children:"If the turtle moves, \u2705 the subscriber is receiving and processing.\nIf nothing happens, check topic name and message type match."}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Next step"}),": Use ",(0,r.jsx)(s.code,{children:"ros2 topic info"})," to verify subscribers exist."]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"common-errors--diagnosis",children:"Common Errors & Diagnosis"}),"\n",(0,r.jsx)(s.h3,{id:"error-ros2-command-not-found",children:'Error: "ros2: command not found"'}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Diagnosis"}),": ROS 2 not in your shell environment"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Command to check"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"source /opt/ros/humble/setup.bash\n"})}),"\n",(0,r.jsx)(s.p,{children:"Then try again."}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"error-node-my_node-not-found",children:"Error: \"Node '/my_node' not found\""}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Diagnosis"}),": Node crashed before you could query it, or name is different"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Commands to check"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ros2 node list  # See what nodes ARE running\n# Check terminal where node was running for error messages\n"})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h3,{id:"error-topic-doesnt-appear-in-ros2-topic-list",children:["Error: Topic doesn't appear in ",(0,r.jsx)(s.code,{children:"ros2 topic list"})]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Diagnosis"}),": ",(0,r.jsx)(s.code,{children:"create_publisher()"})," line has an error"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Typical causes"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Topic name wrong (spelling, capitalization)"}),"\n",(0,r.jsxs)(s.li,{children:["Message type doesn't exist (missing ",(0,r.jsx)(s.code,{children:"from X.msg import Y"}),")"]}),"\n",(0,r.jsx)(s.li,{children:"Import statement wrong"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Fix"}),": Check imports and ",(0,r.jsx)(s.code,{children:"create_publisher()"})," call"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h3,{id:"error-messages-dont-appear-in-ros2-topic-echo",children:["Error: Messages don't appear in ",(0,r.jsx)(s.code,{children:"ros2 topic echo"})]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Diagnosis"}),": Publisher created, but callback never fires"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Typical causes"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Timer not created"}),"\n",(0,r.jsx)(s.li,{children:"Timer callback name spelled wrong"}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"rclpy.spin()"})," not called"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Fix"}),": Check:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"# In __init__:\nself.timer = self.create_timer(0.5, self.timer_callback)\n\n# In main:\nrclpy.spin(node)\n"})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"error-messages-appear-but-are-all-zeros",children:"Error: Messages appear but are all zeros"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Diagnosis"}),": Callback is publishing, but message fields not set"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Typical cause"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"msg = Twist()  # Default: all zeros\n# Forgot to set fields!\nself.publisher_.publish(msg)\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Fix"}),": Set message fields:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"msg = Twist()\nmsg.linear.x = 1.0  # This line was missing\nself.publisher_.publish(msg)\n"})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"error-subscriber-isnt-responding-topic-shows-messages-but-nothing-happens",children:"Error: Subscriber isn't responding (topic shows messages, but nothing happens)"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Diagnosis"}),": Topic/message type mismatch"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Commands to check"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ros2 topic info /turtle1/cmd_vel  # Check message type\nros2 node info /turtlesim         # Check what type subscriber expects\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Typical cause"}),": You're publishing to ",(0,r.jsx)(s.code,{children:"/turtle1/cmd_vel"})," but subscriber expects different message type"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Fix"}),": Use ",(0,r.jsx)(s.code,{children:"ros2 topic info"})," to see expected type, match your publisher"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"-collaboration-exercise-debug-this-system",children:"\ud83e\udd1d Collaboration Exercise: Debug This System"}),"\n",(0,r.jsxs)(s.p,{children:["I've created intentionally broken code. Your job: ",(0,r.jsx)(s.strong,{children:"diagnose and fix it using the toolkit"}),"."]}),"\n",(0,r.jsx)(s.h3,{id:"setup",children:"Setup"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"In Terminal 1"}),", run Turtlesim:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ros2 run turtlesim turtlesim_node\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"In Terminal 2"}),", save this code as ",(0,r.jsx)(s.code,{children:"broken_publisher.py"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom geometry_msgs.msg import Twist\n\nclass BrokenPublisher(Node):\n    def __init__(self):\n        super().__init__('broken_publisher')\n\n        # BUG 1: Wrong topic name\n        self.publisher_ = self.create_publisher(Twist, '/turtle1/move_cmd', 10)\n\n        self.timer = self.create_timer(0.5, self.timer_callback)\n        self.counter = 0\n\n    def timer_callback(self):\n        msg = Twist()\n        # BUG 2: Message values are wrong\n        msg.linear.x = 0.0  # Supposed to move forward, but this is 0!\n        msg.angular.z = 0.0\n\n        self.publisher_.publish(msg)\n        self.counter += 1\n\n        if self.counter >= 5:\n            rclpy.shutdown()\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = BrokenPublisher()\n    rclpy.spin(node)\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"In Terminal 2"}),", run the broken code:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"python3 broken_publisher.py\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"In Terminal 1"})," (Turtlesim window): ",(0,r.jsx)(s.strong,{children:"Nothing happens"})," (turtle doesn't move)"]}),"\n",(0,r.jsx)(s.h3,{id:"your-diagnosis-task",children:"Your Diagnosis Task"}),"\n",(0,r.jsx)(s.p,{children:"Use the 5-question method to find the bugs:"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Question 1"}),": Is the node running?"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ros2 node list | grep broken\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Question 2"}),": Is the topic created?"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ros2 topic list\n# Do you see /turtle1/move_cmd? Or /turtle1/cmd_vel?\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Question 3"}),": Are messages being published?"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ros2 topic echo /turtle1/move_cmd  # or whatever topic you found\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Question 4"}),": Are messages correct?"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# Look at the echo output. What's the linear.x value?\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Question 5"}),": Is the subscriber responding?"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# Does the turtle move? Check Turtlesim window\nros2 node info /turtlesim  # What topics does it subscribe to?\n"})}),"\n",(0,r.jsx)(s.h3,{id:"work-with-ai-to-fix-it",children:"Work With AI to Fix It"}),"\n",(0,r.jsx)(s.p,{children:"Once you've diagnosed, ask Claude:"}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsxs)(s.p,{children:["\"I'm publishing to ",(0,r.jsx)(s.code,{children:"/turtle1/move_cmd"})," but Turtlesim subscribes to ",(0,r.jsx)(s.code,{children:"/turtle1/cmd_vel"}),". Also, my message has ",(0,r.jsx)(s.code,{children:"linear.x = 0.0"})," so the turtle doesn't move. How do I fix this?\""]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Claude will help you understand:"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"Topic names must match exactly"}),"\n",(0,r.jsx)(s.li,{children:"Message values must be non-zero to have effect"}),"\n",(0,r.jsx)(s.li,{children:"The subscriber doesn't care who publishes\u2014it just reads the topic"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"fix-the-code",children:"Fix the Code"}),"\n",(0,r.jsxs)(s.p,{children:["Modify ",(0,r.jsx)(s.code,{children:"broken_publisher.py"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"# Fix BUG 1: Change topic name\nself.publisher_ = self.create_publisher(Twist, '/turtle1/cmd_vel', 10)\n\n# Fix BUG 2: Change message value\nmsg.linear.x = 1.0  # Now it will move!\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Run again. The turtle should now ",(0,r.jsx)(s.strong,{children:"move forward"}),"."]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"self-assessment",children:"Self-Assessment"}),"\n",(0,r.jsx)(s.p,{children:"Before moving to Lesson 5, verify:"}),"\n",(0,r.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(s.li,{className:"task-list-item",children:[(0,r.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Can use ",(0,r.jsx)(s.code,{children:"ros2 node list"})," to see running nodes"]}),"\n",(0,r.jsxs)(s.li,{className:"task-list-item",children:[(0,r.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Can use ",(0,r.jsx)(s.code,{children:"ros2 node info"})," to see what node publishes/subscribes"]}),"\n",(0,r.jsxs)(s.li,{className:"task-list-item",children:[(0,r.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Can use ",(0,r.jsx)(s.code,{children:"ros2 topic list"})," to see active topics"]}),"\n",(0,r.jsxs)(s.li,{className:"task-list-item",children:[(0,r.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Can use ",(0,r.jsx)(s.code,{children:"ros2 topic info"})," to see message type and subscriber count"]}),"\n",(0,r.jsxs)(s.li,{className:"task-list-item",children:[(0,r.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Can use ",(0,r.jsx)(s.code,{children:"ros2 topic echo"})," to watch messages flow"]}),"\n",(0,r.jsxs)(s.li,{className:"task-list-item",children:[(0,r.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Understood the 5-question debugging method"]}),"\n",(0,r.jsxs)(s.li,{className:"task-list-item",children:[(0,r.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Successfully diagnosed and fixed the broken code"]}),"\n",(0,r.jsxs)(s.li,{className:"task-list-item",children:[(0,r.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Collaborated with AI to understand the fixes"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["If all checkboxes pass, ",(0,r.jsx)(s.strong,{children:"you're ready for Lesson 5: Your First Subscriber"}),"."]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"whats-next",children:"What's Next?"}),"\n",(0,r.jsxs)(s.p,{children:["Lesson 5 introduces ",(0,r.jsx)(s.strong,{children:"subscribers"}),"\u2014nodes that ",(0,r.jsx)(s.em,{children:"read"})," messages from topics instead of sending them."]}),"\n",(0,r.jsx)(s.p,{children:"You'll:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Learn the callback pattern (functions triggered by incoming messages)"}),"\n",(0,r.jsx)(s.li,{children:"Write a node that reads turtle position data"}),"\n",(0,r.jsx)(s.li,{children:"Understand decoupling (publisher doesn't know subscribers exist)"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.a,{href:"/physical-ai-robotics-textbook/docs/chapter-1-ros2-fundamentals/first-subscriber",children:"\u2192 Lesson 5: Your First Subscriber"})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"additional-resources",children:"Additional Resources"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://docs.ros.org/en/humble/Tutorials/Beginner-CLI-Tools.html",children:"ROS 2 Diagnostic Tools Tutorial"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://docs.ros.org/en/humble/Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Nodes/Understanding-ROS2-Nodes.html",children:"ros2 node documentation"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"https://docs.ros.org/en/humble/Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Topics/Understanding-ROS2-Topics.html",children:"ros2 topic documentation"})}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8439:(e,s,n)=>{n.d(s,{R:()=>t,x:()=>l});var i=n(758);const r={},o=i.createContext(r);function t(e){const s=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(o.Provider,{value:s},e.children)}}}]);