"use strict";(self.webpackChunkphysical_ai_robotics_textbook=self.webpackChunkphysical_ai_robotics_textbook||[]).push([[179],{6734:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"chapter-1-ros2-fundamentals/publisher","title":"Your First ROS 2 Publisher","description":"Introduction","source":"@site/docs/01-chapter-1-ros2-fundamentals/04-publisher.md","sourceDirName":"01-chapter-1-ros2-fundamentals","slug":"/chapter-1-ros2-fundamentals/publisher","permalink":"/physical-ai-robotics-textbook/docs/chapter-1-ros2-fundamentals/publisher","draft":false,"unlisted":false,"editUrl":"https://github.com/devhammad0/physical-ai-robotics-textbook/tree/main/docs/01-chapter-1-ros2-fundamentals/04-publisher.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"title":"Your First ROS 2 Publisher","chapter":1,"lesson":4,"duration_minutes":60,"simulation_required":["turtlesim"],"safety_level":"simulation_only","cefr_level":"B1","hardware_prerequisites":[],"learning_objectives":["Create a ROS 2 node class using rclpy.Node","Implement a publisher and publish messages to a topic","Use timer callbacks to trigger periodic message publishing","Write a complete, runnable ROS 2 node in Python","Debug publisher issues using ROS 2 CLI tools","Apply error handling and logging in ROS 2 nodes"],"primary_layer":"Layer 1 (Manual Foundation) + Layer 2 (AI Collaboration)"},"sidebar":"tutorialSidebar","previous":{"title":"Nodes and Communication Patterns","permalink":"/physical-ai-robotics-textbook/docs/chapter-1-ros2-fundamentals/nodes-communication"},"next":{"title":"Your First ROS 2 Subscriber","permalink":"/physical-ai-robotics-textbook/docs/chapter-1-ros2-fundamentals/subscriber"}}');var i=n(6070),l=n(8439);const t={title:"Your First ROS 2 Publisher",chapter:1,lesson:4,duration_minutes:60,simulation_required:["turtlesim"],safety_level:"simulation_only",cefr_level:"B1",hardware_prerequisites:[],learning_objectives:["Create a ROS 2 node class using rclpy.Node","Implement a publisher and publish messages to a topic","Use timer callbacks to trigger periodic message publishing","Write a complete, runnable ROS 2 node in Python","Debug publisher issues using ROS 2 CLI tools","Apply error handling and logging in ROS 2 nodes"],primary_layer:"Layer 1 (Manual Foundation) + Layer 2 (AI Collaboration)"},o=void 0,a={},c=[{value:"Introduction",id:"introduction",level:2},{value:"Foundational Knowledge Review",id:"foundational-knowledge-review",level:2},{value:"Node Structure (From Lesson 3)",id:"node-structure-from-lesson-3",level:3},{value:"Publisher API (New)",id:"publisher-api-new",level:3},{value:"Timer Callbacks (New)",id:"timer-callbacks-new",level:3},{value:"Message Types (From Lesson 3)",id:"message-types-from-lesson-3",level:3},{value:"Concept 1: Python Package Structure for ROS 2",id:"concept-1-python-package-structure-for-ros-2",level:2},{value:"Directory Structure",id:"directory-structure",level:3},{value:"Concept 2: The rclpy.Node Base Class",id:"concept-2-the-rclpynode-base-class",level:2},{value:"Creating a Node Class",id:"creating-a-node-class",level:3},{value:"Key Methods in Node",id:"key-methods-in-node",level:3},{value:"Concept 3: Timer Callbacks and Periodic Publishing",id:"concept-3-timer-callbacks-and-periodic-publishing",level:2},{value:"Understanding Timers",id:"understanding-timers",level:3},{value:"Frequency vs. Period",id:"frequency-vs-period",level:3},{value:"Why Periodic Publishing?",id:"why-periodic-publishing",level:3},{value:"Code Example 1: Simple Publisher (Minimal)",id:"code-example-1-simple-publisher-minimal",level:2},{value:"Create the Node File",id:"create-the-node-file",level:3},{value:"Running the Code",id:"running-the-code",level:3},{value:"Verifying with ROS 2 Tools",id:"verifying-with-ros-2-tools",level:3},{value:"Code Example 2: Publisher with Logging",id:"code-example-2-publisher-with-logging",level:2},{value:"Code Example 3: Publisher with Parameters",id:"code-example-3-publisher-with-parameters",level:2},{value:"Code Example 4: Publisher with Error Handling",id:"code-example-4-publisher-with-error-handling",level:2},{value:"How to Run Your First Publisher",id:"how-to-run-your-first-publisher",level:2},{value:"Step 1: Create a Working Directory",id:"step-1-create-a-working-directory",level:3},{value:"Step 2: Copy Code Example 1",id:"step-2-copy-code-example-1",level:3},{value:"Step 3: Create package.xml",id:"step-3-create-packagexml",level:3},{value:"Step 4: Create setup.py",id:"step-4-create-setuppy",level:3},{value:"Step 5: Create <strong>init</strong>.py",id:"step-5-create-initpy",level:3},{value:"Step 6: Build the Package",id:"step-6-build-the-package",level:3},{value:"Step 7: Run the Node",id:"step-7-run-the-node",level:3},{value:"Debugging Your Publisher",id:"debugging-your-publisher",level:2},{value:"Problem 1: &quot;ModuleNotFoundError: No module named &#39;geometry_msgs&#39;&quot;",id:"problem-1-modulenotfounderror-no-module-named-geometry_msgs",level:3},{value:"Problem 2: &quot;Turtle doesn&#39;t move&quot;",id:"problem-2-turtle-doesnt-move",level:3},{value:"Problem 3: &quot;Connection timeout&quot; or &quot;Cannot connect to ROS network&quot;",id:"problem-3-connection-timeout-or-cannot-connect-to-ros-network",level:3},{value:"Problem 4: &quot;Turtle moves but very slowly/fast&quot;",id:"problem-4-turtle-moves-but-very-slowlyfast",level:3},{value:"Problem 5: &quot;Topics won&#39;t echo messages&quot;",id:"problem-5-topics-wont-echo-messages",level:3},{value:"Self-Assessment Checklist",id:"self-assessment-checklist",level:2},{value:"Further Exploration (Optional)",id:"further-exploration-optional",level:2},{value:"What&#39;s Next?",id:"whats-next",level:2},{value:"Layer 2: AI Collaboration Prompts",id:"layer-2-ai-collaboration-prompts",level:2},{value:"For Understanding Node Structure",id:"for-understanding-node-structure",level:3},{value:"For Debugging Issues",id:"for-debugging-issues",level:3},{value:"For Advanced Features",id:"for-advanced-features",level:3},{value:"Concept Count &amp; CEFR Validation",id:"concept-count--cefr-validation",level:2}];function d(e){const r={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.h2,{id:"introduction",children:"Introduction"}),"\n",(0,i.jsx)(r.p,{children:"Now it's time to write your first ROS 2 code! In this lesson, you'll create a Python node that publishes velocity commands to Turtlesim, making the turtle move."}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"What you'll build"}),": A ",(0,i.jsx)(r.code,{children:"SimpleTurtlePublisher"})," node that:"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["Creates a publisher on the ",(0,i.jsx)(r.code,{children:"/turtle1/cmd_vel"})," topic"]}),"\n",(0,i.jsxs)(r.li,{children:["Sends ",(0,i.jsx)(r.code,{children:"Twist"})," messages (velocity commands) at 10 Hz"]}),"\n",(0,i.jsx)(r.li,{children:"Makes the turtle move forward indefinitely"}),"\n",(0,i.jsx)(r.li,{children:"Handles graceful shutdown"}),"\n"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Simulation environment"}),": Turtlesim (from Lesson 2)"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Time estimate"}),": 60 minutes (including running and debugging)"]}),"\n",(0,i.jsx)(r.p,{children:"By the end, you'll understand:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"How to structure a ROS 2 node class"}),"\n",(0,i.jsx)(r.li,{children:"How publishers work (create, initialize, publish)"}),"\n",(0,i.jsx)(r.li,{children:"How timer callbacks enable periodic publishing"}),"\n",(0,i.jsxs)(r.li,{children:["How to debug using ",(0,i.jsx)(r.code,{children:"ros2 topic echo"})," and ",(0,i.jsx)(r.code,{children:"ros2 topic hz"})]}),"\n"]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"foundational-knowledge-review",children:"Foundational Knowledge Review"}),"\n",(0,i.jsx)(r.p,{children:"Before diving into code, let's review key concepts from Lessons 1-3:"}),"\n",(0,i.jsx)(r.h3,{id:"node-structure-from-lesson-3",children:"Node Structure (From Lesson 3)"}),"\n",(0,i.jsx)(r.p,{children:"Every ROS 2 node:"}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsxs)(r.li,{children:["Inherits from ",(0,i.jsx)(r.code,{children:"rclpy.node.Node"})]}),"\n",(0,i.jsxs)(r.li,{children:["Has an ",(0,i.jsx)(r.code,{children:"__init__"})," method that sets up publishers, subscribers, and timers"]}),"\n",(0,i.jsx)(r.li,{children:"Has callback methods for handling events (timers, subscriptions)"}),"\n",(0,i.jsxs)(r.li,{children:["Is initialized with ",(0,i.jsx)(r.code,{children:"rclpy.init()"})]}),"\n",(0,i.jsxs)(r.li,{children:["Runs with ",(0,i.jsx)(r.code,{children:"rclpy.spin(node)"})]}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"publisher-api-new",children:"Publisher API (New)"}),"\n",(0,i.jsx)(r.p,{children:"A publisher is created in the node constructor:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"self.publisher = self.create_publisher(\r\n    msg_type,          # e.g., geometry_msgs.msg.Twist\r\n    topic_name,        # e.g., '/turtle1/cmd_vel'\r\n    queue_size         # e.g., 10 (max queued messages)\r\n)\n"})}),"\n",(0,i.jsx)(r.p,{children:"Publishing a message:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"msg = Twist()          # Create message\r\nmsg.linear.x = 1.0     # Set fields\r\nself.publisher.publish(msg)  # Send it\n"})}),"\n",(0,i.jsx)(r.h3,{id:"timer-callbacks-new",children:"Timer Callbacks (New)"}),"\n",(0,i.jsx)(r.p,{children:"For periodic tasks, create a timer:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"self.timer = self.create_timer(\r\n    0.1,                    # Period in seconds (10 Hz = 0.1s)\r\n    self.timer_callback    # Function to call periodically\r\n)\n"})}),"\n",(0,i.jsx)(r.p,{children:"The callback runs every 0.1 seconds:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"def timer_callback(self):\r\n    msg = Twist()\r\n    msg.linear.x = 1.0\r\n    self.publisher.publish(msg)\n"})}),"\n",(0,i.jsx)(r.h3,{id:"message-types-from-lesson-3",children:"Message Types (From Lesson 3)"}),"\n",(0,i.jsxs)(r.p,{children:["The ",(0,i.jsx)(r.code,{children:"Twist"})," message represents velocity:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"geometry_msgs.msg.Twist:\r\n  linear:\r\n    x: float (m/s)       # forward/backward\r\n    y: float (m/s)       # sideways\r\n    z: float (m/s)       # vertical\r\n  angular:\r\n    x: float (rad/s)     # roll\r\n    y: float (rad/s)     # pitch\r\n    z: float (rad/s)     # yaw (turning)\n"})}),"\n",(0,i.jsx)(r.p,{children:"For Turtlesim:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["Set ",(0,i.jsx)(r.code,{children:"linear.x"})," to move forward (positive) or backward (negative)"]}),"\n",(0,i.jsxs)(r.li,{children:["Set ",(0,i.jsx)(r.code,{children:"angular.z"})," to turn (positive = counter-clockwise)"]}),"\n"]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"concept-1-python-package-structure-for-ros-2",children:"Concept 1: Python Package Structure for ROS 2"}),"\n",(0,i.jsxs)(r.p,{children:["ROS 2 nodes live in ",(0,i.jsx)(r.strong,{children:"packages"}),". A package is a directory with metadata about your node."]}),"\n",(0,i.jsx)(r.h3,{id:"directory-structure",children:"Directory Structure"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"ros2_workspace/\r\n\u251c\u2500\u2500 src/\r\n\u2502   \u2514\u2500\u2500 my_first_package/\r\n\u2502       \u251c\u2500\u2500 my_first_package/\r\n\u2502       \u2502   \u251c\u2500\u2500 __init__.py\r\n\u2502       \u2502   \u2514\u2500\u2500 publisher_node.py      # Your node code\r\n\u2502       \u251c\u2500\u2500 setup.py\r\n\u2502       \u251c\u2500\u2500 setup.cfg\r\n\u2502       \u251c\u2500\u2500 package.xml\r\n\u2502       \u2514\u2500\u2500 resource/\r\n\u2502           \u2514\u2500\u2500 my_first_package\r\n\u2514\u2500\u2500 install/\r\n\u2514\u2500\u2500 build/\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Key files"}),":"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"package.xml"}),": Package metadata (name, version, dependencies, maintainer)"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"setup.py"}),": Python package configuration (entry points, package data)"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"setup.cfg"}),": Python package metadata"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"publisher_node.py"}),": Your actual node code"]}),"\n"]}),"\n",(0,i.jsx)(r.p,{children:"We'll create this structure in a moment. For now, understand that ROS 2 expects this layout."}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"concept-2-the-rclpynode-base-class",children:"Concept 2: The rclpy.Node Base Class"}),"\n",(0,i.jsxs)(r.p,{children:["Every ROS 2 node inherits from ",(0,i.jsx)(r.code,{children:"rclpy.node.Node"}),". Let's understand the key methods:"]}),"\n",(0,i.jsx)(r.h3,{id:"creating-a-node-class",children:"Creating a Node Class"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"from rclpy.node import Node\r\n\r\nclass MyPublisher(Node):\r\n    def __init__(self):\r\n        super().__init__('my_publisher')  # Node name\r\n\r\n        # Create publishers, subscribers, timers here\r\n        self.publisher = self.create_publisher(...)\r\n        self.timer = self.create_timer(...)\n"})}),"\n",(0,i.jsxs)(r.p,{children:["The ",(0,i.jsx)(r.code,{children:"__init__"})," method:"]}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsxs)(r.li,{children:["Calls ",(0,i.jsx)(r.code,{children:"super().__init__()"})," with the node name"]}),"\n",(0,i.jsx)(r.li,{children:"Sets up publishers, subscribers, parameters, timers"}),"\n",(0,i.jsx)(r.li,{children:"Does NOT enter the spin loop yet"}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"key-methods-in-node",children:"Key Methods in Node"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Method"}),(0,i.jsx)(r.th,{children:"Purpose"}),(0,i.jsx)(r.th,{children:"Example"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"create_publisher()"})}),(0,i.jsx)(r.td,{children:"Create a publisher"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"self.create_publisher(Twist, '/cmd_vel', 10)"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"create_subscription()"})}),(0,i.jsx)(r.td,{children:"Create a subscriber"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"self.create_subscription(Image, '/camera/image', callback, 10)"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"create_timer()"})}),(0,i.jsx)(r.td,{children:"Schedule periodic callback"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"self.create_timer(0.1, self.callback)"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"get_logger()"})}),(0,i.jsx)(r.td,{children:"Get logger for this node"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:'self.get_logger().info("message")'})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"declare_parameter()"})}),(0,i.jsx)(r.td,{children:"Declare a configurable parameter"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"self.declare_parameter('speed', 1.0)"})})]})]})]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"concept-3-timer-callbacks-and-periodic-publishing",children:"Concept 3: Timer Callbacks and Periodic Publishing"}),"\n",(0,i.jsx)(r.h3,{id:"understanding-timers",children:"Understanding Timers"}),"\n",(0,i.jsx)(r.p,{children:"A timer calls a function at regular intervals:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"# Create timer: call self.timer_callback() every 0.1 seconds (10 Hz)\r\nself.timer = self.create_timer(0.1, self.timer_callback)\r\n\r\ndef timer_callback(self):\r\n    msg = Twist()\r\n    msg.linear.x = 1.0\r\n    self.publisher.publish(msg)\n"})}),"\n",(0,i.jsx)(r.h3,{id:"frequency-vs-period",children:"Frequency vs. Period"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Frequency"})," (Hz): Messages per second"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"10 Hz = 10 messages/second"}),"\n",(0,i.jsx)(r.li,{children:"1 Hz = 1 message/second"}),"\n",(0,i.jsx)(r.li,{children:"30 Hz = 30 messages/second"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Period"})," (seconds): Time between messages"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"10 Hz \u2192 period = 1/10 = 0.1 seconds"}),"\n",(0,i.jsx)(r.li,{children:"1 Hz \u2192 period = 1/1 = 1.0 seconds"}),"\n",(0,i.jsx)(r.li,{children:"30 Hz \u2192 period = 1/30 \u2248 0.033 seconds"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Conversion"}),": ",(0,i.jsx)(r.code,{children:"period = 1.0 / frequency"})]}),"\n",(0,i.jsx)(r.h3,{id:"why-periodic-publishing",children:"Why Periodic Publishing?"}),"\n",(0,i.jsx)(r.p,{children:"Sensor and command data needs to be sent continuously:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Sensor data"})," (30 Hz): Camera images, lidar scans"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Control commands"})," (10-50 Hz): Motor commands, velocity"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Status updates"})," (1 Hz): Battery level, temperature"]}),"\n"]}),"\n",(0,i.jsx)(r.p,{children:"If you publish once and stop, the subscriber sees one message and then nothing. Periodic publishing ensures continuous data flow."}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"code-example-1-simple-publisher-minimal",children:"Code Example 1: Simple Publisher (Minimal)"}),"\n",(0,i.jsx)(r.p,{children:"Let's create your first node. This is the absolute minimum to understand the concepts."}),"\n",(0,i.jsx)(r.h3,{id:"create-the-node-file",children:"Create the Node File"}),"\n",(0,i.jsxs)(r.p,{children:["Create a file at: ",(0,i.jsx)(r.code,{children:"publisher_node.py"})]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:'"""\r\nSimple ROS 2 Publisher Node\r\nSimulation environment: Turtlesim\r\n"""\r\n\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom geometry_msgs.msg import Twist\r\n\r\n\r\nclass SimpleTurtlePublisher(Node):\r\n    """Publishes velocity commands to Turtlesim at 10 Hz."""\r\n\r\n    def __init__(self):\r\n        super().__init__(\'simple_turtle_publisher\')\r\n\r\n        # Create publisher on /turtle1/cmd_vel topic\r\n        self.publisher = self.create_publisher(\r\n            Twist,                  # Message type\r\n            \'/turtle1/cmd_vel\',     # Topic name\r\n            10                      # Queue size\r\n        )\r\n\r\n        # Create timer to call callback every 0.1 seconds (10 Hz)\r\n        self.timer = self.create_timer(0.1, self.timer_callback)\r\n\r\n    def timer_callback(self):\r\n        """Publishes a Twist message every 0.1 seconds."""\r\n        msg = Twist()\r\n        msg.linear.x = 1.0      # 1 m/s forward\r\n        msg.angular.z = 0.0     # No rotation\r\n\r\n        self.publisher.publish(msg)\r\n\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    node = SimpleTurtlePublisher()\r\n\r\n    try:\r\n        rclpy.spin(node)\r\n    except KeyboardInterrupt:\r\n        pass\r\n    finally:\r\n        rclpy.shutdown()\r\n\r\n\r\nif __name__ == \'__main__\':\r\n    main()\n'})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Total lines"}),": 38 | ",(0,i.jsx)(r.strong,{children:"Concepts used"}),": 5"]}),"\n",(0,i.jsx)(r.h3,{id:"running-the-code",children:"Running the Code"}),"\n",(0,i.jsx)(r.p,{children:"Open two terminals:"}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"Terminal 1: Launch Turtlesim"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"source /opt/ros/humble/setup.bash\r\nros2 run turtlesim turtlesim_node\n"})}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"Terminal 2: Run your publisher"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"source /opt/ros/humble/setup.bash\r\ncd path/to/publisher_node.py\r\npython3 publisher_node.py\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Expected behavior"}),": The turtle moves forward continuously in a straight line."]}),"\n",(0,i.jsx)(r.h3,{id:"verifying-with-ros-2-tools",children:"Verifying with ROS 2 Tools"}),"\n",(0,i.jsxs)(r.p,{children:["Open a ",(0,i.jsx)(r.strong,{children:"third terminal"})," and verify the publisher is working:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"source /opt/ros/humble/setup.bash\r\n\r\n# Check topic exists\r\nros2 topic list | grep cmd_vel\r\n\r\n# Watch messages\r\nros2 topic echo /turtle1/cmd_vel\r\n\r\n# Check publish frequency\r\nros2 topic hz /turtle1/cmd_vel\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Expected output"}),":"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"linear:\r\n  x: 1.0\r\n  y: 0.0\r\n  z: 0.0\r\nangular:\r\n  x: 0.0\r\n  y: 0.0\r\n  z: 0.0\r\n---\n"})}),"\n",(0,i.jsx)(r.p,{children:"And frequency should show ~10 Hz."}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"code-example-2-publisher-with-logging",children:"Code Example 2: Publisher with Logging"}),"\n",(0,i.jsx)(r.p,{children:"Real-world nodes log their activity. Let's add logging to the publisher:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:'"""\r\nROS 2 Publisher with Logging\r\nSimulation environment: Turtlesim\r\n"""\r\n\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom geometry_msgs.msg import Twist\r\n\r\n\r\nclass LoggingTurtlePublisher(Node):\r\n    """Publishes velocity commands with logging output."""\r\n\r\n    def __init__(self):\r\n        super().__init__(\'logging_turtle_publisher\')\r\n\r\n        # Get logger for this node\r\n        self.get_logger().info(\'LoggingTurtlePublisher initializing...\')\r\n\r\n        # Create publisher\r\n        self.publisher = self.create_publisher(Twist, \'/turtle1/cmd_vel\', 10)\r\n\r\n        # Create timer\r\n        self.timer = self.create_timer(0.1, self.timer_callback)\r\n\r\n        # Counter for messages\r\n        self.msg_count = 0\r\n\r\n        self.get_logger().info(\'LoggingTurtlePublisher ready!\')\r\n\r\n    def timer_callback(self):\r\n        """Publishes velocity and logs every 10th message."""\r\n        msg = Twist()\r\n        msg.linear.x = 1.5      # 1.5 m/s forward\r\n        msg.angular.z = 0.0     # No rotation\r\n\r\n        self.publisher.publish(msg)\r\n\r\n        self.msg_count += 1\r\n\r\n        # Log every 10 messages (once per second at 10 Hz)\r\n        if self.msg_count % 10 == 0:\r\n            self.get_logger().info(\r\n                f\'Published {self.msg_count} messages. \'\r\n                f\'Moving at {msg.linear.x} m/s\'\r\n            )\r\n\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    node = LoggingTurtlePublisher()\r\n\r\n    try:\r\n        rclpy.spin(node)\r\n    except KeyboardInterrupt:\r\n        node.get_logger().info(\'Shutting down...\')\r\n    finally:\r\n        rclpy.shutdown()\r\n\r\n\r\nif __name__ == \'__main__\':\r\n    main()\n'})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Running"}),":"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"python3 logging_publisher.py\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Expected output"}),":"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"[INFO] [logging_turtle_publisher]: LoggingTurtlePublisher initializing...\r\n[INFO] [logging_turtle_publisher]: LoggingTurtlePublisher ready!\r\n[INFO] [logging_turtle_publisher]: Published 10 messages. Moving at 1.5 m/s\r\n[INFO] [logging_turtle_publisher]: Published 20 messages. Moving at 1.5 m/s\r\n[INFO] [logging_turtle_publisher]: Published 30 messages. Moving at 1.5 m/s\r\n...\n"})}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"code-example-3-publisher-with-parameters",children:"Code Example 3: Publisher with Parameters"}),"\n",(0,i.jsx)(r.p,{children:"Real nodes use parameters for configuration. Let's make speed configurable:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"\"\"\"\r\nROS 2 Publisher with Parameters\r\nSimulation environment: Turtlesim\r\n\"\"\"\r\n\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom geometry_msgs.msg import Twist\r\n\r\n\r\nclass ParameterizedTurtlePublisher(Node):\r\n    \"\"\"Publisher with configurable speed parameter.\"\"\"\r\n\r\n    def __init__(self):\r\n        super().__init__('parameterized_turtle_publisher')\r\n\r\n        # Declare parameters with default values\r\n        self.declare_parameter('linear_velocity', 1.0)   # Default: 1 m/s\r\n        self.declare_parameter('angular_velocity', 0.0)  # Default: no rotation\r\n        self.declare_parameter('publish_rate', 10.0)      # Default: 10 Hz\r\n\r\n        self.get_logger().info('Parameters declared. Waiting for config...')\r\n\r\n        # Get initial parameter values\r\n        self.linear_vel = self.get_parameter('linear_velocity').value\r\n        self.angular_vel = self.get_parameter('angular_velocity').value\r\n        pub_rate = self.get_parameter('publish_rate').value\r\n\r\n        # Create publisher\r\n        self.publisher = self.create_publisher(Twist, '/turtle1/cmd_vel', 10)\r\n\r\n        # Create timer based on publish_rate\r\n        timer_period = 1.0 / pub_rate  # Convert Hz to seconds\r\n        self.timer = self.create_timer(timer_period, self.timer_callback)\r\n\r\n        self.get_logger().info(\r\n            f'Publishing at {pub_rate} Hz with '\r\n            f'linear={self.linear_vel} m/s, '\r\n            f'angular={self.angular_vel} rad/s'\r\n        )\r\n\r\n    def timer_callback(self):\r\n        \"\"\"Publishes with configured velocities.\"\"\"\r\n        msg = Twist()\r\n        msg.linear.x = self.linear_vel\r\n        msg.linear.y = 0.0\r\n        msg.linear.z = 0.0\r\n        msg.angular.x = 0.0\r\n        msg.angular.y = 0.0\r\n        msg.angular.z = self.angular_vel\r\n\r\n        self.publisher.publish(msg)\r\n\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    node = ParameterizedTurtlePublisher()\r\n\r\n    try:\r\n        rclpy.spin(node)\r\n    except KeyboardInterrupt:\r\n        node.get_logger().info('Shutting down...')\r\n    finally:\r\n        rclpy.shutdown()\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Running with custom parameters"}),":"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"# Run with default parameters\r\npython3 param_publisher.py\r\n\r\n# Or set parameters via ROS 2\r\npython3 param_publisher.py &\r\nros2 param set /parameterized_turtle_publisher linear_velocity 2.5\r\nros2 param set /parameterized_turtle_publisher angular_velocity 0.5\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Expected output"}),":"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"[INFO] [parameterized_turtle_publisher]: Parameters declared. Waiting for config...\r\n[INFO] [parameterized_turtle_publisher]: Publishing at 10.0 Hz with linear=1.0 m/s, angular=0.0 rad/s\n"})}),"\n",(0,i.jsxs)(r.p,{children:["The turtle moves at 1 m/s straight, or you can change speed dynamically with ",(0,i.jsx)(r.code,{children:"ros2 param set"}),"."]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"code-example-4-publisher-with-error-handling",children:"Code Example 4: Publisher with Error Handling"}),"\n",(0,i.jsx)(r.p,{children:"Production code needs error handling. Here's a robust version:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"\"\"\"\r\nROS 2 Publisher with Error Handling and Logging\r\nSimulation environment: Turtlesim\r\n\"\"\"\r\n\r\nimport sys\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom geometry_msgs.msg import Twist\r\n\r\n\r\nclass RobustTurtlePublisher(Node):\r\n    \"\"\"Publisher with comprehensive error handling.\"\"\"\r\n\r\n    def __init__(self):\r\n        super().__init__('robust_turtle_publisher')\r\n\r\n        self.logger = self.get_logger()\r\n\r\n        try:\r\n            # Declare parameters\r\n            self.declare_parameter('linear_velocity', 1.0)\r\n            self.declare_parameter('angular_velocity', 0.0)\r\n            self.declare_parameter('publish_rate', 10.0)\r\n\r\n            # Validate parameter values\r\n            self.linear_vel = self.get_parameter('linear_velocity').value\r\n            self.angular_vel = self.get_parameter('angular_velocity').value\r\n            pub_rate = self.get_parameter('publish_rate').value\r\n\r\n            if pub_rate <= 0.0:\r\n                raise ValueError(f'publish_rate must be positive, got {pub_rate}')\r\n\r\n            # Create publisher\r\n            self.publisher = self.create_publisher(\r\n                Twist,\r\n                '/turtle1/cmd_vel',\r\n                10\r\n            )\r\n\r\n            # Create timer\r\n            timer_period = 1.0 / pub_rate\r\n            self.timer = self.create_timer(timer_period, self.timer_callback)\r\n\r\n            # Statistics\r\n            self.msg_count = 0\r\n            self.error_count = 0\r\n\r\n            self.logger.info(\r\n                f'RobustTurtlePublisher initialized successfully. '\r\n                f'Publishing at {pub_rate} Hz'\r\n            )\r\n\r\n        except Exception as e:\r\n            self.logger.error(f'Initialization failed: {e}')\r\n            raise\r\n\r\n    def timer_callback(self):\r\n        \"\"\"Publishes with error handling.\"\"\"\r\n        try:\r\n            msg = Twist()\r\n            msg.linear.x = self.linear_vel\r\n            msg.linear.y = 0.0\r\n            msg.linear.z = 0.0\r\n            msg.angular.x = 0.0\r\n            msg.angular.y = 0.0\r\n            msg.angular.z = self.angular_vel\r\n\r\n            # Validate message before publishing\r\n            if not self._validate_message(msg):\r\n                self.error_count += 1\r\n                return\r\n\r\n            self.publisher.publish(msg)\r\n            self.msg_count += 1\r\n\r\n            # Log statistics every 100 messages\r\n            if self.msg_count % 100 == 0:\r\n                self.logger.debug(\r\n                    f'Published {self.msg_count} messages. '\r\n                    f'Errors: {self.error_count}'\r\n                )\r\n\r\n        except Exception as e:\r\n            self.logger.error(f'Error in timer_callback: {e}')\r\n            self.error_count += 1\r\n\r\n    @staticmethod\r\n    def _validate_message(msg):\r\n        \"\"\"Validate message fields.\"\"\"\r\n        # Check that velocities are reasonable\r\n        if abs(msg.linear.x) > 10.0:\r\n            return False  # Limit to 10 m/s max\r\n        if abs(msg.angular.z) > 3.14:\r\n            return False  # Limit to 1\u03c0 rad/s max\r\n        return True\r\n\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n\r\n    try:\r\n        node = RobustTurtlePublisher()\r\n        rclpy.spin(node)\r\n    except KeyboardInterrupt:\r\n        print('\\nInterrupt received, shutting down...')\r\n    except Exception as e:\r\n        print(f'Fatal error: {e}', file=sys.stderr)\r\n        sys.exit(1)\r\n    finally:\r\n        rclpy.shutdown()\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Features"}),":"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Parameter validation (checks pub_rate > 0)"}),"\n",(0,i.jsx)(r.li,{children:"Error handling in callbacks (doesn't crash on exceptions)"}),"\n",(0,i.jsx)(r.li,{children:"Message validation (ensures velocities are reasonable)"}),"\n",(0,i.jsx)(r.li,{children:"Statistics tracking (counts successful publishes and errors)"}),"\n",(0,i.jsx)(r.li,{children:"Graceful shutdown with error status"}),"\n"]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"how-to-run-your-first-publisher",children:"How to Run Your First Publisher"}),"\n",(0,i.jsx)(r.h3,{id:"step-1-create-a-working-directory",children:"Step 1: Create a Working Directory"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"mkdir -p ~/ros2_workspace/src/my_first_package/my_first_package\r\ncd ~/ros2_workspace/src/my_first_package\n"})}),"\n",(0,i.jsx)(r.h3,{id:"step-2-copy-code-example-1",children:"Step 2: Copy Code Example 1"}),"\n",(0,i.jsxs)(r.p,{children:["Create ",(0,i.jsx)(r.code,{children:"my_first_package/publisher_node.py"})," and copy Code Example 1 into it."]}),"\n",(0,i.jsx)(r.h3,{id:"step-3-create-packagexml",children:"Step 3: Create package.xml"}),"\n",(0,i.jsxs)(r.p,{children:["Create ",(0,i.jsx)(r.code,{children:"package.xml"})," in the package directory:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n<?xml-model href="http://download.ros.org/schema/package_format3.xsd" schematypens="http://www.w3.org/2001/XMLSchema"?>\r\n<package format="3">\r\n  <name>my_first_package</name>\r\n  <version>0.0.1</version>\r\n  <description>My first ROS 2 package with a publisher node</description>\r\n  <maintainer email="you@example.com">Your Name</maintainer>\r\n  <license>Apache-2.0</license>\r\n\r\n  <depend>rclpy</depend>\r\n  <depend>geometry_msgs</depend>\r\n\r\n  <test_depend>pytest</test_depend>\r\n\r\n  <export>\r\n    <build_type>ament_python</build_type>\r\n  </export>\r\n</package>\n'})}),"\n",(0,i.jsx)(r.h3,{id:"step-4-create-setuppy",children:"Step 4: Create setup.py"}),"\n",(0,i.jsxs)(r.p,{children:["Create ",(0,i.jsx)(r.code,{children:"setup.py"})," in the package directory:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"from setuptools import find_packages, setup\r\n\r\npackage_name = 'my_first_package'\r\n\r\nsetup(\r\n    name=package_name,\r\n    version='0.0.1',\r\n    packages=find_packages(exclude=['test']),\r\n    data_files=[\r\n        ('share/ament_cmake_core/cmake/package_cmake_template',\r\n         ['package.xml']),\r\n    ],\r\n    install_requires=['setuptools'],\r\n    zip_safe=True,\r\n    maintainer='Your Name',\r\n    maintainer_email='you@example.com',\r\n    description='My first ROS 2 package',\r\n    license='Apache-2.0',\r\n    tests_require=['pytest'],\r\n    entry_points={\r\n        'console_scripts': [\r\n            'publisher_node = my_first_package.publisher_node:main',\r\n        ],\r\n    },\r\n)\n"})}),"\n",(0,i.jsxs)(r.h3,{id:"step-5-create-initpy",children:["Step 5: Create ",(0,i.jsx)(r.strong,{children:"init"}),".py"]}),"\n",(0,i.jsxs)(r.p,{children:["Create ",(0,i.jsx)(r.code,{children:"my_first_package/__init__.py"})," (empty file):"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"# Marker file for Python package\n"})}),"\n",(0,i.jsx)(r.h3,{id:"step-6-build-the-package",children:"Step 6: Build the Package"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"cd ~/ros2_workspace\r\ncolcon build --symlink-install\r\nsource install/setup.bash\n"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Expected output"}),":"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"Starting >>> my_first_package\r\nFinished <<< my_first_package [0.0s]\r\n\r\nSummary: 1 package finished [0.0s]\n"})}),"\n",(0,i.jsx)(r.h3,{id:"step-7-run-the-node",children:"Step 7: Run the Node"}),"\n",(0,i.jsxs)(r.p,{children:["Now you can run it with ",(0,i.jsx)(r.code,{children:"ros2 run"}),":"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"# In one terminal\r\nros2 run turtlesim turtlesim_node\r\n\r\n# In another\r\nros2 run my_first_package publisher_node\n"})}),"\n",(0,i.jsx)(r.p,{children:"Or directly:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"python3 my_first_package/publisher_node.py\n"})}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"debugging-your-publisher",children:"Debugging Your Publisher"}),"\n",(0,i.jsx)(r.h3,{id:"problem-1-modulenotfounderror-no-module-named-geometry_msgs",children:"Problem 1: \"ModuleNotFoundError: No module named 'geometry_msgs'\""}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Cause"}),": ROS 2 environment not sourced, or package not installed."]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Solution"}),":"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"source /opt/ros/humble/setup.bash\r\npython3 publisher_node.py\n"})}),"\n",(0,i.jsx)(r.h3,{id:"problem-2-turtle-doesnt-move",children:'Problem 2: "Turtle doesn\'t move"'}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Cause"}),": Topic name wrong, or turtlesim not running."]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Solution"}),":"]}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsxs)(r.li,{children:["Verify turtlesim is running: ",(0,i.jsx)(r.code,{children:"ros2 node list"})," (should show ",(0,i.jsx)(r.code,{children:"/turtlesim"}),")"]}),"\n",(0,i.jsxs)(r.li,{children:["Verify your topic: ",(0,i.jsx)(r.code,{children:"ros2 topic list"})," (should show ",(0,i.jsx)(r.code,{children:"/turtle1/cmd_vel"}),")"]}),"\n",(0,i.jsxs)(r.li,{children:["Check topic info: ",(0,i.jsx)(r.code,{children:"ros2 topic info /turtle1/cmd_vel"})," (should show 1 publisher)"]}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"problem-3-connection-timeout-or-cannot-connect-to-ros-network",children:'Problem 3: "Connection timeout" or "Cannot connect to ROS network"'}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Cause"}),": ",(0,i.jsx)(r.code,{children:"rclpy.init()"})," not called, or ROS 2 daemon crashed."]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Solution"}),":"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"ros2 daemon stop\r\nros2 daemon start\r\nsource /opt/ros/humble/setup.bash\r\npython3 publisher_node.py\n"})}),"\n",(0,i.jsx)(r.h3,{id:"problem-4-turtle-moves-but-very-slowlyfast",children:'Problem 4: "Turtle moves but very slowly/fast"'}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Cause"}),": Velocity value wrong."]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Solution"}),": Check your ",(0,i.jsx)(r.code,{children:"linear.x"})," value:"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"linear.x = 0.5"})," \u2192 moves at 0.5 m/s (slow)"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"linear.x = 2.0"})," \u2192 moves at 2.0 m/s (fast)"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"linear.x = 0.0"})," \u2192 doesn't move"]}),"\n"]}),"\n",(0,i.jsx)(r.p,{children:"Adjust the value in your code and rerun."}),"\n",(0,i.jsx)(r.h3,{id:"problem-5-topics-wont-echo-messages",children:'Problem 5: "Topics won\'t echo messages"'}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Cause"}),": Publisher isn't being called, or timer isn't working."]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Solution"}),":"]}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsx)(r.li,{children:"Add logging to timer_callback"}),"\n",(0,i.jsx)(r.li,{children:"Check timer period is correct"}),"\n",(0,i.jsxs)(r.li,{children:["Verify ",(0,i.jsx)(r.code,{children:"rclpy.spin()"})," is running (blocks the terminal)"]}),"\n"]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"self-assessment-checklist",children:"Self-Assessment Checklist"}),"\n",(0,i.jsx)(r.p,{children:"Before moving to Lesson 5, verify:"}),"\n",(0,i.jsxs)(r.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(r.li,{className:"task-list-item",children:[(0,i.jsx)(r.input,{type:"checkbox",disabled:!0})," ","I can explain the rclpy.Node class structure"]}),"\n",(0,i.jsxs)(r.li,{className:"task-list-item",children:[(0,i.jsx)(r.input,{type:"checkbox",disabled:!0})," ","I know how to create a publisher with ",(0,i.jsx)(r.code,{children:"create_publisher()"})]}),"\n",(0,i.jsxs)(r.li,{className:"task-list-item",children:[(0,i.jsx)(r.input,{type:"checkbox",disabled:!0})," ","I understand timer callbacks and periodic publishing"]}),"\n",(0,i.jsxs)(r.li,{className:"task-list-item",children:[(0,i.jsx)(r.input,{type:"checkbox",disabled:!0})," ","I can write a complete ROS 2 node from scratch"]}),"\n",(0,i.jsxs)(r.li,{className:"task-list-item",children:[(0,i.jsx)(r.input,{type:"checkbox",disabled:!0})," ","I can run my node with ",(0,i.jsx)(r.code,{children:"ros2 run"})," (after colcon build)"]}),"\n",(0,i.jsxs)(r.li,{className:"task-list-item",children:[(0,i.jsx)(r.input,{type:"checkbox",disabled:!0})," ","I can verify my publisher works with ",(0,i.jsx)(r.code,{children:"ros2 topic echo"})]}),"\n",(0,i.jsxs)(r.li,{className:"task-list-item",children:[(0,i.jsx)(r.input,{type:"checkbox",disabled:!0})," ","I understand the frequency-to-period conversion (period = 1/frequency)"]}),"\n",(0,i.jsxs)(r.li,{className:"task-list-item",children:[(0,i.jsx)(r.input,{type:"checkbox",disabled:!0})," ","I can debug common publisher issues using ROS 2 tools"]}),"\n",(0,i.jsxs)(r.li,{className:"task-list-item",children:[(0,i.jsx)(r.input,{type:"checkbox",disabled:!0})," ","I recognize that pub/sub communication is asynchronous"]}),"\n"]}),"\n",(0,i.jsx)(r.p,{children:"If any checks failed, re-read the corresponding section."}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"further-exploration-optional",children:"Further Exploration (Optional)"}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Modify the Publisher"}),":"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Make the turtle move in a circle (set both linear.x and angular.z)"}),"\n",(0,i.jsx)(r.li,{children:"Change publish rate to 5 Hz, 30 Hz, and observe the difference"}),"\n",(0,i.jsx)(r.li,{children:"Create a square motion pattern"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Advanced Logging"}),":"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["Use different log levels: ",(0,i.jsx)(r.code,{children:"info()"}),", ",(0,i.jsx)(r.code,{children:"warn()"}),", ",(0,i.jsx)(r.code,{children:"error()"}),", ",(0,i.jsx)(r.code,{children:"debug()"})]}),"\n",(0,i.jsxs)(r.li,{children:["Set logger level: ",(0,i.jsx)(r.code,{children:"self.get_logger().set_level(logging.DEBUG)"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"ROS 2 Documentation"}),":"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["Publisher and Subscriber documentation: ",(0,i.jsx)(r.a,{href:"https://docs.ros.org/en/humble/Tutorials/Beginner-Client-Libraries/Creating-Your-First-ROS2-Package.html",children:"https://docs.ros.org/en/humble/Tutorials/Beginner-Client-Libraries/Creating-Your-First-ROS2-Package.html"})]}),"\n",(0,i.jsxs)(r.li,{children:["Geometry Msgs documentation: ",(0,i.jsx)(r.a,{href:"https://docs.ros.org/en/humble/Concepts/Intermediate-Concepts/About-Builtin-Interfaces.html",children:"https://docs.ros.org/en/humble/Concepts/Intermediate-Concepts/About-Builtin-Interfaces.html"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"whats-next",children:"What's Next?"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Lesson 5: Your First ROS 2 Subscriber"})," (Coming in Chapter 1, Lesson 5)"]}),"\n",(0,i.jsx)(r.p,{children:"You'll learn:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"How to create a subscriber node"}),"\n",(0,i.jsx)(r.li,{children:"How callbacks work when messages arrive"}),"\n",(0,i.jsx)(r.li,{children:"How to build a complete pub/sub system (publisher + subscriber)"}),"\n",(0,i.jsx)(r.li,{children:"How to synchronize data between multiple nodes"}),"\n"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Estimated time"}),": 60 minutes"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Prerequisites"}),": Understand publishers from this lesson"]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"layer-2-ai-collaboration-prompts",children:"Layer 2: AI Collaboration Prompts"}),"\n",(0,i.jsx)(r.h3,{id:"for-understanding-node-structure",children:"For Understanding Node Structure"}),"\n",(0,i.jsxs)(r.blockquote,{children:["\n",(0,i.jsxs)(r.p,{children:["\"I just wrote my first ROS 2 node. Ask Claude: 'What would happen if I forgot to call ",(0,i.jsx)(r.code,{children:"rclpy.init()"})," before creating the node? Why is this necessary?'\""]}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"for-debugging-issues",children:"For Debugging Issues"}),"\n",(0,i.jsxs)(r.blockquote,{children:["\n",(0,i.jsx)(r.p,{children:"\"My turtle isn't moving even though my code looks right. Ask Claude: 'Walk me through the debugging process. What are all the places where things could go wrong between publishing a message and the turtle moving?'\""}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"for-advanced-features",children:"For Advanced Features"}),"\n",(0,i.jsxs)(r.blockquote,{children:["\n",(0,i.jsx)(r.p,{children:"\"Ask Claude: 'My publisher publishes 10 Hz, but Turtlesim expects continuous commands. What happens if the turtle receives no messages for 1 second? Does it stop or keep moving?'\""}),"\n"]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"concept-count--cefr-validation",children:"Concept Count & CEFR Validation"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Total B1 Concepts Introduced"}),": 8"]}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsx)(r.li,{children:"rclpy.Node class inheritance and structure"}),"\n",(0,i.jsxs)(r.li,{children:["Publisher creation with ",(0,i.jsx)(r.code,{children:"create_publisher()"})]}),"\n",(0,i.jsx)(r.li,{children:"Message instantiation and field assignment"}),"\n",(0,i.jsxs)(r.li,{children:["Publishing messages with ",(0,i.jsx)(r.code,{children:"publisher.publish()"})]}),"\n",(0,i.jsx)(r.li,{children:"Timer callbacks for periodic execution"}),"\n",(0,i.jsx)(r.li,{children:"Frequency and period conversion (Hz \u2194 seconds)"}),"\n",(0,i.jsxs)(r.li,{children:["Logging and debugging with ",(0,i.jsx)(r.code,{children:"get_logger()"})]}),"\n",(0,i.jsx)(r.li,{children:"Error handling and graceful shutdown"}),"\n"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"CEFR B1 Alignment"}),": \u2713 Requires understanding of node lifecycle (A2), adds hands-on coding with concrete output"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Code Complexity"}),": 4 working examples (increasing complexity from 38 to ~90 lines)"]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"Chapter 1, Lesson 4 Complete"})}),"\n",(0,i.jsx)(r.p,{children:"You've successfully written your first ROS 2 publisher!"}),"\n",(0,i.jsx)(r.p,{children:"Next: Lesson 5 \u2014 Your First ROS 2 Subscriber (Part of Chapter 1)"})]})}function h(e={}){const{wrapper:r}={...(0,l.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8439:(e,r,n)=>{n.d(r,{R:()=>t,x:()=>o});var s=n(758);const i={},l=s.createContext(i);function t(e){const r=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),s.createElement(l.Provider,{value:r},e.children)}}}]);