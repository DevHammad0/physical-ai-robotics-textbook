"use strict";(self.webpackChunkphysical_ai_robotics_textbook=self.webpackChunkphysical_ai_robotics_textbook||[]).push([[424],{4295:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"chapter-1-ros2-fundamentals/multi-node-systems","title":"Building Multi-Node Systems","description":"Introduction","source":"@site/docs/chapter-1-ros2-fundamentals/06-multi-node-systems.md","sourceDirName":"chapter-1-ros2-fundamentals","slug":"/chapter-1-ros2-fundamentals/multi-node-systems","permalink":"/physical-ai-robotics-textbook/docs/chapter-1-ros2-fundamentals/multi-node-systems","draft":false,"unlisted":false,"editUrl":"https://github.com/devhammad0/physical-ai-robotics-textbook/tree/main/docs/chapter-1-ros2-fundamentals/06-multi-node-systems.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"title":"Building Multi-Node Systems","sidebar_position":6,"sidebar_label":"6. Multi-Node Systems","chapter":1,"lesson":6,"lesson_slug":"multi-node-systems","duration_minutes":90,"estimated_difficulty":"beginner","simulation_required":["turtlesim"],"safety_level":"simulation_only","cefr_level":"A2","hardware_prerequisites":[],"concepts":["Multi-node architecture","System design","Node independence","Topic-based communication","Loose coupling","Asynchronous execution","System integration"],"primary_layer":"Layer 2","learning_objectives":["Design a multi-node robot system","Understand how independent nodes coordinate via topics","Create 3+ nodes that work together seamlessly","Recognize system architectural patterns","Demonstrate loose coupling and asynchronous communication","Troubleshoot multi-node systems"],"assessment_type":"practical_exercise","keywords":["ROS 2","multi-node","system architecture","design","coordination","decoupling","integration"]},"sidebar":"tutorialSidebar","previous":{"title":"5. First Subscriber","permalink":"/physical-ai-robotics-textbook/docs/chapter-1-ros2-fundamentals/first-subscriber"},"next":{"title":"Physical AI & Humanoid Robotics Textbook","permalink":"/physical-ai-robotics-textbook/docs/intro"}}');var i=s(6070),r=s(8439);const o={title:"Building Multi-Node Systems",sidebar_position:6,sidebar_label:"6. Multi-Node Systems",chapter:1,lesson:6,lesson_slug:"multi-node-systems",duration_minutes:90,estimated_difficulty:"beginner",simulation_required:["turtlesim"],safety_level:"simulation_only",cefr_level:"A2",hardware_prerequisites:[],concepts:["Multi-node architecture","System design","Node independence","Topic-based communication","Loose coupling","Asynchronous execution","System integration"],primary_layer:"Layer 2",learning_objectives:["Design a multi-node robot system","Understand how independent nodes coordinate via topics","Create 3+ nodes that work together seamlessly","Recognize system architectural patterns","Demonstrate loose coupling and asynchronous communication","Troubleshoot multi-node systems"],assessment_type:"practical_exercise",keywords:["ROS 2","multi-node","system architecture","design","coordination","decoupling","integration"]},l="Building Multi-Node Systems",d={},a=[{value:"Introduction",id:"introduction",level:2},{value:"System Architecture: Pen Drawer",id:"system-architecture-pen-drawer",level:2},{value:"Architecture Diagram",id:"architecture-diagram",level:3},{value:"Node 1: Movement Planner",id:"node-1-movement-planner",level:2},{value:"Node 2: Command Generator",id:"node-2-command-generator",level:2},{value:"Running the Multi-Node System",id:"running-the-multi-node-system",level:2},{value:"Step 1: Terminal Setup",id:"step-1-terminal-setup",level:3},{value:"Step 2: Watch It Happen",id:"step-2-watch-it-happen",level:3},{value:"Step 3: Verify Multi-Node System",id:"step-3-verify-multi-node-system",level:3},{value:"\ud83d\udcac AI CoLearning: System Design",id:"-ai-colearning-system-design",level:2},{value:"\ud83e\udd1d Collaboration Exercise: Design Your Own System",id:"-collaboration-exercise-design-your-own-system",level:2},{value:"Scenario: Obstacle Avoidance",id:"scenario-obstacle-avoidance",level:3},{value:"Exercise: Add a Monitoring Node",id:"exercise-add-a-monitoring-node",level:2},{value:"Understanding Decoupling",id:"understanding-decoupling",level:2},{value:"Scenario: Want to Add a Path Follower?",id:"scenario-want-to-add-a-path-follower",level:3},{value:"Troubleshooting Multi-Node Systems",id:"troubleshooting-multi-node-systems",level:2},{value:"Issue: &quot;Nodes not communicating&quot;",id:"issue-nodes-not-communicating",level:3},{value:"Issue: &quot;Turtle doesn&#39;t move even though messages are publishing&quot;",id:"issue-turtle-doesnt-move-even-though-messages-are-publishing",level:3},{value:"Issue: &quot;Multiple nodes interfering with each other&quot;",id:"issue-multiple-nodes-interfering-with-each-other",level:3},{value:"Capstone Challenge: Build a Complete System",id:"capstone-challenge-build-a-complete-system",level:2},{value:"Requirements",id:"requirements",level:3},{value:"Your Task",id:"your-task",level:3},{value:"Success Criteria",id:"success-criteria",level:3},{value:"Self-Assessment",id:"self-assessment",level:2},{value:"Chapter 1 Summary",id:"chapter-1-summary",level:2},{value:"Additional Resources",id:"additional-resources",level:2}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"building-multi-node-systems",children:"Building Multi-Node Systems"})}),"\n",(0,i.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,i.jsxs)(n.p,{children:["You now understand ",(0,i.jsx)(n.strong,{children:"publishers"})," and ",(0,i.jsx)(n.strong,{children:"subscribers"}),". In this final lesson, you'll combine them to build a complete ",(0,i.jsx)(n.strong,{children:"robot system"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"A real robot doesn't have one node. It has many:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Sensor reader nodes (read cameras, Lidar, etc.)"}),"\n",(0,i.jsx)(n.li,{children:"Processing nodes (detect obstacles, plan paths)"}),"\n",(0,i.jsx)(n.li,{children:"Decision nodes (decide what to do)"}),"\n",(0,i.jsx)(n.li,{children:"Motor driver nodes (execute commands)"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["All independent. All communicating via topics. ",(0,i.jsx)(n.strong,{children:"All working together seamlessly."})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"What you'll build"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"3 nodes working as a system"}),"\n",(0,i.jsx)(n.li,{children:"Each node independent, doing one thing well"}),"\n",(0,i.jsx)(n.li,{children:"Coordinated through topics (not direct function calls)"}),"\n",(0,i.jsx)(n.li,{children:"Architecture you could scale to 10, 50, 100 nodes"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"system-architecture-pen-drawer",children:"System Architecture: Pen Drawer"}),"\n",(0,i.jsx)(n.p,{children:"Let's build a system that makes the Turtlesim turtle draw a square."}),"\n",(0,i.jsx)(n.h3,{id:"architecture-diagram",children:"Architecture Diagram"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Movement Planner Node      \u2502  (decides what to do)\n\u2502   publishes movement goals   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n               \u2502 /movement/goal\n               \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Command Generator Node     \u2502  (converts goals to commands)\n\u2502   reads goals, publishes cmd \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n               \u2502 /turtle1/cmd_vel\n               \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Turtlesim                  \u2502  (executes commands)\n\u2502   reads commands, moves      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Three nodes"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Movement Planner"}),' \u2014 High-level: "move forward 1 meter"']}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Command Generator"}),' \u2014 Low-level: "move forward at 1 m/s"']}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Turtlesim"})," \u2014 Hardware: moves the turtle"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Each node is ",(0,i.jsx)(n.strong,{children:"independent"}),". Each node is ",(0,i.jsx)(n.strong,{children:"reusable"}),". They communicate via ",(0,i.jsx)(n.strong,{children:"topics"}),"."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"node-1-movement-planner",children:"Node 1: Movement Planner"}),"\n",(0,i.jsxs)(n.p,{children:["This node decides ",(0,i.jsx)(n.strong,{children:"what to do"}),": move forward 1 meter, rotate 90 degrees, repeat 4 times to make a square."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"File"}),": ",(0,i.jsx)(n.code,{children:"planner_node.py"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\nimport time\n\n\nclass MovementPlanner(Node):\n    def __init__(self):\n        super().__init__('movement_planner')\n\n        # Publisher: sends high-level movement goals\n        self.publisher_ = self.create_publisher(String, '/movement/goal', 10)\n\n        # Timer: plan every 2 seconds (time for robot to complete previous goal)\n        self.timer = self.create_timer(2.0, self.timer_callback)\n\n        # Track which step we're on\n        self.step = 0\n        self.completed = False\n\n    def timer_callback(self):\n        if self.completed:\n            return\n\n        # Create a goal message\n        msg = String()\n\n        # Square pattern: move, rotate, move, rotate, move, rotate, move, rotate (stop)\n        step_mod = self.step % 8\n\n        if step_mod == 0:\n            msg.data = 'move_forward'\n        elif step_mod == 1:\n            msg.data = 'rotate_right'\n        elif step_mod == 2:\n            msg.data = 'move_forward'\n        elif step_mod == 3:\n            msg.data = 'rotate_right'\n        elif step_mod == 4:\n            msg.data = 'move_forward'\n        elif step_mod == 5:\n            msg.data = 'rotate_right'\n        elif step_mod == 6:\n            msg.data = 'move_forward'\n        elif step_mod == 7:\n            msg.data = 'rotate_right'\n            msg.data = 'stop'  # After 4 rotations, stop\n            self.completed = True\n            self.get_logger().info('Square complete!')\n\n        self.publisher_.publish(msg)\n        self.get_logger().info(f'Planning: {msg.data}')\n        self.step += 1\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = MovementPlanner()\n\n    try:\n        rclpy.spin(node)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        node.destroy_node()\n        rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"What this node does"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'Publishes high-level goals ("move_forward", "rotate_right")'}),"\n",(0,i.jsx)(n.li,{children:"One goal every 2 seconds"}),"\n",(0,i.jsx)(n.li,{children:"Doesn't know HOW the robot moves, only WHAT it should do"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"node-2-command-generator",children:"Node 2: Command Generator"}),"\n",(0,i.jsx)(n.p,{children:"This node translates high-level goals into low-level motor commands."}),"\n",(0,i.jsxs)(n.p,{children:["It ",(0,i.jsx)(n.strong,{children:"subscribes"})," to ",(0,i.jsx)(n.code,{children:"/movement/goal"})," (from planner) and ",(0,i.jsx)(n.strong,{children:"publishes"})," to ",(0,i.jsx)(n.code,{children:"/turtle1/cmd_vel"})," (for Turtlesim)."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"File"}),": ",(0,i.jsx)(n.code,{children:"command_generator_node.py"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\nfrom geometry_msgs.msg import Twist\n\n\nclass CommandGenerator(Node):\n    def __init__(self):\n        super().__init__('command_generator')\n\n        # Subscribe to movement goals\n        self.subscription = self.create_subscription(\n            String, '/movement/goal', self.goal_callback, 10\n        )\n\n        # Publish motor commands\n        self.publisher_ = self.create_publisher(Twist, '/turtle1/cmd_vel', 10)\n\n    def goal_callback(self, msg):\n        \"\"\"Convert high-level goal to low-level command\"\"\"\n\n        # Create a Twist command\n        cmd = Twist()\n\n        if msg.data == 'move_forward':\n            cmd.linear.x = 1.0   # Move forward at 1 m/s\n            cmd.angular.z = 0.0  # Don't rotate\n            self.get_logger().info('Generating command: move forward')\n\n        elif msg.data == 'rotate_right':\n            cmd.linear.x = 0.0    # Don't move forward\n            cmd.angular.z = -0.5  # Rotate clockwise at 0.5 rad/s\n            self.get_logger().info('Generating command: rotate right')\n\n        elif msg.data == 'stop':\n            cmd.linear.x = 0.0\n            cmd.angular.z = 0.0\n            self.get_logger().info('Generating command: stop')\n\n        # Publish the command\n        self.publisher_.publish(cmd)\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = CommandGenerator()\n\n    try:\n        rclpy.spin(node)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        node.destroy_node()\n        rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"What this node does"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Reads high-level goals from planner"}),"\n",(0,i.jsx)(n.li,{children:"Converts them to motor commands (Twist)"}),"\n",(0,i.jsx)(n.li,{children:"Publishes commands for Turtlesim"}),"\n",(0,i.jsx)(n.li,{children:"Doesn't know what goals are coming, just handles them"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"running-the-multi-node-system",children:"Running the Multi-Node System"}),"\n",(0,i.jsx)(n.h3,{id:"step-1-terminal-setup",children:"Step 1: Terminal Setup"}),"\n",(0,i.jsx)(n.p,{children:"You'll need 3 terminals:"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Terminal 1"}),": Turtlesim"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 run turtlesim turtlesim_node\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Terminal 2"}),": Command Generator"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"python3 ~/command_generator_node.py\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Terminal 3"}),": Movement Planner"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"python3 ~/planner_node.py\n"})}),"\n",(0,i.jsx)(n.h3,{id:"step-2-watch-it-happen",children:"Step 2: Watch It Happen"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"In Terminal 3"})," (planner output):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"[INFO] [movement_planner]: Planning: move_forward\n[INFO] [movement_planner]: Planning: rotate_right\n[INFO] [movement_planner]: Planning: move_forward\n...\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"In Terminal 2"})," (command generator output):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"[INFO] [command_generator]: Generating command: move forward\n[INFO] [command_generator]: Generating command: rotate right\n[INFO] [command_generator]: Generating command: move forward\n...\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"In Terminal 1"})," (Turtlesim window):"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Turtle draws a ",(0,i.jsx)(n.strong,{children:"square"}),"!"]}),"\n",(0,i.jsx)(n.li,{children:"Each side is about 1 meter"}),"\n",(0,i.jsx)(n.li,{children:"Each corner is a 90-degree rotation"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"step-3-verify-multi-node-system",children:"Step 3: Verify Multi-Node System"}),"\n",(0,i.jsxs)(n.p,{children:["In a ",(0,i.jsx)(n.strong,{children:"new terminal"}),", run:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 node list\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Expected output"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"/command_generator\n/movement_planner\n/turtlesim\n"})}),"\n",(0,i.jsx)(n.p,{children:"Three independent nodes!"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 topic list\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Expected output"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"/movement/goal      \u2190 Planner publishes here\n/turtle1/cmd_vel    \u2190 Generator publishes here\n/turtle1/pose       \u2190 Turtlesim publishes here\n...\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-ai-colearning-system-design",children:"\ud83d\udcac AI CoLearning: System Design"}),"\n",(0,i.jsx)(n.p,{children:"Now you've built a 3-node system. Let's think about architecture."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Ask Claude"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:'"Why did we separate the Planner from the Command Generator? Why not one node?"'}),"\n",(0,i.jsx)(n.li,{children:'"If I wanted to add a node that logs every movement goal, where would I plug it in?"'}),"\n",(0,i.jsx)(n.li,{children:'"Could I replace Turtlesim with a real robot without changing the other two nodes?"'}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Expected answers"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Separation of concerns: high-level planning vs low-level control. Reusable."}),"\n",(0,i.jsxs)(n.li,{children:["Subscribe to ",(0,i.jsx)(n.code,{children:"/movement/goal"})," topic. No changes needed to planner or generator."]}),"\n",(0,i.jsxs)(n.li,{children:["Yes! As long as the new robot subscribes to ",(0,i.jsx)(n.code,{children:"/turtle1/cmd_vel"}),", the planner and generator still work."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["This teaches ",(0,i.jsx)(n.strong,{children:"architectural thinking"}),": how to design systems that scale and adapt."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-collaboration-exercise-design-your-own-system",children:"\ud83e\udd1d Collaboration Exercise: Design Your Own System"}),"\n",(0,i.jsx)(n.p,{children:"Now YOU design a system."}),"\n",(0,i.jsx)(n.h3,{id:"scenario-obstacle-avoidance",children:"Scenario: Obstacle Avoidance"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Requirement"}),": Robot detects obstacles and avoids them."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Your task"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Draw a diagram with 4+ nodes:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Sensor Reader (publishes obstacle data)"}),"\n",(0,i.jsx)(n.li,{children:"Obstacle Detector (reads sensor, publishes obstacles detected)"}),"\n",(0,i.jsx)(n.li,{children:"Path Planner (reads obstacles, publishes movement goal)"}),"\n",(0,i.jsx)(n.li,{children:"Motor Controller (reads goal, publishes motor commands)"}),"\n",(0,i.jsx)(n.li,{children:"(Optional) Safety Monitor (watches for stuck robot)"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Label each node and the topics between them"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Ask Claude:"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"\"I'm designing a robot that avoids obstacles. Here's my architecture: [your description]. Is this good? What would happen if the Path Planner is slow?\""}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Claude will suggest improvements:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Buffering strategies"}),"\n",(0,i.jsx)(n.li,{children:"Decoupling ideas"}),"\n",(0,i.jsx)(n.li,{children:"Scalability considerations"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Implement one of the nodes (Sensor Reader or Obstacle Detector) as code"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"exercise-add-a-monitoring-node",children:"Exercise: Add a Monitoring Node"}),"\n",(0,i.jsxs)(n.p,{children:["Let's add a ",(0,i.jsx)(n.strong,{children:"fourth node"})," that monitors the system without changing the existing three."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"File"}),": ",(0,i.jsx)(n.code,{children:"monitor_node.py"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\nfrom geometry_msgs.msg import Twist\n\n\nclass SystemMonitor(Node):\n    def __init__(self):\n        super().__init__('system_monitor')\n\n        # Subscribe to goals\n        self.goal_sub = self.create_subscription(\n            String, '/movement/goal', self.goal_callback, 10\n        )\n\n        # Subscribe to commands\n        self.cmd_sub = self.create_subscription(\n            Twist, '/turtle1/cmd_vel', self.cmd_callback, 10\n        )\n\n        self.goal_count = 0\n        self.cmd_count = 0\n\n    def goal_callback(self, msg):\n        self.goal_count += 1\n        self.get_logger().info(\n            f'[MONITOR] Goal #{self.goal_count}: {msg.data}'\n        )\n\n    def cmd_callback(self, msg):\n        self.cmd_count += 1\n        self.get_logger().info(\n            f'[MONITOR] Command #{self.cmd_count}: '\n            f'v={msg.linear.x:.1f}, w={msg.angular.z:.1f}'\n        )\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = SystemMonitor()\n\n    try:\n        rclpy.spin(node)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        node.destroy_node()\n        rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Run it"})," in a 4th terminal:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"python3 ~/monitor_node.py\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Output"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"[MONITOR] Goal #1: move_forward\n[MONITOR] Command #1: v=1.0, w=0.0\n[MONITOR] Goal #2: rotate_right\n[MONITOR] Command #2: v=0.0, w=-0.5\n...\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Key insight"}),": You added a monitoring node ",(0,i.jsx)(n.strong,{children:"without changing any existing nodes"}),". This is loose coupling!"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"understanding-decoupling",children:"Understanding Decoupling"}),"\n",(0,i.jsx)(n.p,{children:"Let's see why loose coupling matters."}),"\n",(0,i.jsx)(n.h3,{id:"scenario-want-to-add-a-path-follower",children:"Scenario: Want to Add a Path Follower?"}),"\n",(0,i.jsx)(n.p,{children:"In traditional single-process code:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"def draw_square():\n    # All in one function\n    move_forward()\n    rotate_right()\n    move_forward()\n    rotate_right()\n    # Hard to modify, hard to test\n"})}),"\n",(0,i.jsx)(n.p,{children:"To add a path follower, you'd need to rewrite the whole thing."}),"\n",(0,i.jsx)(n.p,{children:"With ROS 2:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Just add a new node that:\n- Subscribes to /movement/goal\n- Does whatever you want\n- No changes to existing nodes!\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Example: Add a ",(0,i.jsx)(n.strong,{children:"visualization node"})," that shows the planned path:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"class PathVisualizer(Node):\n    def __init__(self):\n        super().__init__('path_visualizer')\n        self.subscription = self.create_subscription(\n            String, '/movement/goal', self.callback, 10\n        )\n\n    def callback(self, msg):\n        if msg.data == 'move_forward':\n            print('\u25b6\ufe0f  Moving forward')\n        elif msg.data == 'rotate_right':\n            print('\u21bb  Rotating right')\n\n# Run it. It works without any changes to existing nodes!\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting-multi-node-systems",children:"Troubleshooting Multi-Node Systems"}),"\n",(0,i.jsx)(n.h3,{id:"issue-nodes-not-communicating",children:'Issue: "Nodes not communicating"'}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Diagnosis"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 topic list                    # Are topics created?\nros2 node list                     # Are nodes running?\nros2 node info /movement_planner   # What does planner publish?\nros2 node info /command_generator  # What does generator subscribe to?\nros2 topic echo /movement/goal     # Are messages flowing?\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Common causes"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Typo in topic name (case-sensitive!)"}),"\n",(0,i.jsx)(n.li,{children:"Wrong message type"}),"\n",(0,i.jsx)(n.li,{children:"Node crashed (check terminal for errors)"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"issue-turtle-doesnt-move-even-though-messages-are-publishing",children:'Issue: "Turtle doesn\'t move even though messages are publishing"'}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Check"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Is Turtlesim running? ",(0,i.jsx)(n.code,{children:"ros2 node list | grep turtlesim"})]}),"\n",(0,i.jsxs)(n.li,{children:["Are commands published to ",(0,i.jsx)(n.code,{children:"/turtle1/cmd_vel"}),"? ",(0,i.jsx)(n.code,{children:"ros2 topic echo /turtle1/cmd_vel"})]}),"\n",(0,i.jsx)(n.li,{children:"Are message values sensible? (linear.x should be ~1.0, not 0.0)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"If messages exist and have good values, check the Twist message type matches."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"issue-multiple-nodes-interfering-with-each-other",children:'Issue: "Multiple nodes interfering with each other"'}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Diagnosis"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 node info /command_generator  # Multiple subscribers?\nros2 topic info /turtle1/cmd_vel   # Multiple publishers?\n"})}),"\n",(0,i.jsx)(n.p,{children:"If two nodes publish to same topic, the last message wins (undefined behavior)."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Solution"}),": Each node should publish to different topics OR coordinate via a single topic with well-defined messages."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"capstone-challenge-build-a-complete-system",children:"Capstone Challenge: Build a Complete System"}),"\n",(0,i.jsx)(n.p,{children:"Here's your final challenge for Chapter 1."}),"\n",(0,i.jsx)(n.h3,{id:"requirements",children:"Requirements"}),"\n",(0,i.jsxs)(n.p,{children:["Design and implement a ",(0,i.jsx)(n.strong,{children:"4-node system"})," where:"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Node A"})," (Sensor Simulator): Publishes fake sensor data (obstacle distance, 0-10 meters)"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Topic: /sensor/distance\nMessage: Float32 (distance in meters)\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Node B"})," (Obstacle Detector): Reads sensor data, detects if too close (< 1 meter)"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'Subscribe: /sensor/distance\nPublish: /obstacle/detected (String: "CLEAR" or "OBSTACLE")\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Node C"})," (Planner): Reads obstacles, decides action"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'Subscribe: /obstacle/detected\nPublish: /movement/goal (String: "move_forward" or "stop")\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Node D"})," (Motor Driver): Reads goals, sends motor commands to Turtlesim"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Subscribe: /movement/goal\nPublish: /turtle1/cmd_vel\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"your-task",children:"Your Task"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Write Node A"})," (sensor simulator)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Write Node B"})," (obstacle detector)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Write Node C"})," (planner)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Write Node D"})," (motor driver) - can reuse from earlier lessons"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Run all 4 together"}),": Turtlesim + 4 nodes = 5 nodes total"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Verify"}),": Turtle should move forward, stop when obstacle detected, move again when clear"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"success-criteria",children:"Success Criteria"}),"\n",(0,i.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","All 4 nodes run without errors"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,i.jsx)(n.code,{children:"ros2 node list"})," shows all 4"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Topics connect correctly (verified with ",(0,i.jsx)(n.code,{children:"ros2 topic echo"}),")"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Turtle behavior demonstrates obstacle avoidance"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","No direct function calls between nodes (all via topics)"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Can add a 5th monitoring node without breaking existing 4"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"self-assessment",children:"Self-Assessment"}),"\n",(0,i.jsx)(n.p,{children:"Before completing Chapter 1, verify:"}),"\n",(0,i.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Understand multi-node architecture (3+ independent nodes)"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Can create a system where nodes communicate via topics"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Recognize the benefits of loose coupling"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Successfully ran the 3-node square-drawing system"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Added a 4th monitoring node without modifying existing code"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Debugged multi-node issues using ",(0,i.jsx)(n.code,{children:"ros2"})," tools"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Designed a complete 4-node system (obstacle avoidance)"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Understand asynchronous, event-driven communication"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["If all checkboxes pass, ",(0,i.jsx)(n.strong,{children:"you've mastered Chapter 1 ROS 2 Fundamentals!"})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"chapter-1-summary",children:"Chapter 1 Summary"}),"\n",(0,i.jsx)(n.p,{children:"You've learned:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Lesson"}),(0,i.jsx)(n.th,{children:"What You Learned"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"1"}),(0,i.jsx)(n.td,{children:"Why ROS 2 exists, nodes, topics, pub/sub pattern"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"2"}),(0,i.jsx)(n.td,{children:"Installation, command-line tools, system exploration"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"3"}),(0,i.jsx)(n.td,{children:"Writing publishers, Twist messages, timers"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"4"}),(0,i.jsx)(n.td,{children:"Diagnostic tools, debugging methodology, error diagnosis"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"5"}),(0,i.jsx)(n.td,{children:"Writing subscribers, callbacks, event-driven programming"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"6"}),(0,i.jsx)(n.td,{children:"Multi-node systems, architecture, loose coupling"})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Next"}),": Chapter 2 adds ",(0,i.jsx)(n.strong,{children:"physics simulation"})," (Gazebo), ",(0,i.jsx)(n.strong,{children:"sensors"}),", and ",(0,i.jsx)(n.strong,{children:"realistic robots"}),". You'll apply these same ROS 2 concepts to more complex systems."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"#",children:"\u2192 Ready for Chapter 2? Go to Next Chapter"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"additional-resources",children:"Additional Resources"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Tutorials/Beginner-Client-Libraries/Writing-A-Simple-Py-Publisher-And-Subscriber.html",children:"ROS 2 Multi-Robot Systems"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Concepts.html",children:"System Architecture Patterns"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/ros2/examples",children:"Real-World ROS 2 Examples"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8439:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>l});var t=s(758);const i={},r=t.createContext(i);function o(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);